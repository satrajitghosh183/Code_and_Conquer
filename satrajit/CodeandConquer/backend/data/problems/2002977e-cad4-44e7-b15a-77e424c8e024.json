{
  "id": "2002977e-cad4-44e7-b15a-77e424c8e024",
  "title": "Cycle Length Queries in a Tree",
  "slug": "cycle-length-queries-in-a-tree",
  "description": "You are given an integer `n`. There is a **complete binary tree** with `2n - 1` nodes. The root of that tree is the node with the value `1`, and every node with a value `val` in the range `[1, 2n - 1 - 1]` has two children where:\n\n*   The left node has the value `2 * val`, and\n*   The right node has the value `2 * val + 1`.\n\nYou are also given a 2D integer array `queries` of length `m`, where `queries[i] = [ai, bi]`. For each query, solve the following problem:\n\n1.  Add an edge between the nodes with values `ai` and `bi`.\n2.  Find the length of the cycle in the graph.\n3.  Remove the added edge between nodes with values `ai` and `bi`.\n\n**Note** that:\n\n*   A **cycle** is a path that starts and ends at the same node, and each edge in the path is visited only once.\n*   The length of a cycle is the number of edges visited in the cycle.\n*   There could be multiple edges between two nodes in the tree after adding the edge of the query.\n\nReturn _an array_ `answer` _of length_ `m` _where_ `answer[i]` _is the answer to the_ `ith` _query._\n\n**Example 1:**\n\n**Input:** n = 3, queries = \\[\\[5,3\\],\\[4,7\\],\\[2,3\\]\\]\n**Output:** \\[4,5,3\\]\n**Explanation:** The diagrams above show the tree of 23 - 1 nodes. Nodes colored in red describe the nodes in the cycle after adding the edge.\n- After adding the edge between nodes 3 and 5, the graph contains a cycle of nodes \\[5,2,1,3\\]. Thus answer to the first query is 4. We delete the added edge and process the next query.\n- After adding the edge between nodes 4 and 7, the graph contains a cycle of nodes \\[4,2,1,3,7\\]. Thus answer to the second query is 5. We delete the added edge and process the next query.\n- After adding the edge between nodes 2 and 3, the graph contains a cycle of nodes \\[2,1,3\\]. Thus answer to the third query is 3. We delete the added edge.\n\n**Example 2:**\n\n**Input:** n = 2, queries = \\[\\[1,2\\]\\]\n**Output:** \\[2\\]\n**Explanation:** The diagram above shows the tree of 22 - 1 nodes. Nodes colored in red describe the nodes in the cycle after adding the edge.\n- After adding the edge between nodes 1 and 2, the graph contains a cycle of nodes \\[2,1\\]. Thus answer for the first query is 2. We delete the added edge.\n\n**Constraints:**\n\n*   `2 <= n <= 30`\n*   `m == queries.length`\n*   `1 <= m <= 105`\n*   `queries[i].length == 2`\n*   `1 <= ai, bi <= 2n - 1`\n*   `ai != bi`",
  "difficulty": "Hard",
  "category": null,
  "xpReward": 0,
  "timeLimitMs": 5000,
  "memoryLimitMb": 256,
  "starterCode": [],
  "solutionCode": "",
  "hints": [],
  "isPremium": false,
  "createdBy": null,
  "testCases": [
    {
      "input": [
        3,
        [
          [
            5,
            3
          ],
          [
            4,
            7
          ],
          [
            2,
            3
          ]
        ]
      ],
      "expectedOutput": [
        4,
        5,
        3
      ]
    },
    {
      "input": [
        2,
        [
          [
            1,
            2
          ]
        ]
      ],
      "expectedOutput": [
        2
      ]
    }
  ],
  "hiddenTestCases": [
    {
      "input": [
        3,
        [
          [
            5,
            3
          ],
          [
            4,
            7
          ],
          [
            2,
            3
          ]
        ]
      ],
      "expectedOutput": [
        4,
        5,
        3
      ]
    },
    {
      "input": [
        2,
        [
          [
            1,
            2
          ]
        ]
      ],
      "expectedOutput": [
        2
      ]
    }
  ],
  "tags": [],
  "constraints": [],
  "examples": [],
  "createdAt": "2025-11-14T21:26:06.380616+00:00",
  "updatedAt": "2025-12-04T04:35:25.566Z"
}
